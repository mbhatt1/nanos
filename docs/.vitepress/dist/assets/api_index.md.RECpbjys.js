import{_ as a,c as n,o as i,ag as t}from"./chunks/framework.bCALENAD.js";const o=JSON.parse('{"title":"API Overview","description":"","frontmatter":{},"headers":[],"relativePath":"api/index.md","filePath":"api/index.md","lastUpdated":1768626356000}'),e={name:"api/index.md"};function l(p,s,r,h,d,E){return i(),n("div",null,[...s[0]||(s[0]=[t(`<h1 id="api-overview" tabindex="-1">API Overview <a class="header-anchor" href="#api-overview" aria-label="Permalink to &quot;API Overview&quot;">​</a></h1><p>The Authority Kernel provides a set of syscalls for AI agent operations.</p><h2 id="syscall-architecture" tabindex="-1">Syscall Architecture <a class="header-anchor" href="#syscall-architecture" aria-label="Permalink to &quot;Syscall Architecture&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;User Space&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        APP[AI Agent Application]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SDK[Authority SDK]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Authority Kernel Syscalls&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        direction TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        STATE[State Management&lt;br/&gt;1024-1027]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        TOOLS[Tool Calls&lt;br/&gt;1028-1029]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        AUDIT[Audit&lt;br/&gt;1030-1031]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CTRL[Control&lt;br/&gt;1032-1036]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        COG[Cognitive&lt;br/&gt;1037]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UX[Deny UX&lt;br/&gt;1040-1042]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Processing Pipeline&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        GATE[Authority Gate]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        POLICY[Policy Check]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        EXEC[Execute]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        LOG[Audit Log]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    APP --&gt; SDK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK --&gt; STATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK --&gt; TOOLS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK --&gt; AUDIT</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK --&gt; CTRL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK --&gt; COG</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK --&gt; UX</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    STATE --&gt; GATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    TOOLS --&gt; GATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    AUDIT --&gt; GATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CTRL --&gt; GATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    COG --&gt; GATE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UX --&gt; GATE</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    GATE --&gt; POLICY</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    POLICY --&gt; EXEC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    EXEC --&gt; LOG</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style GATE fill:#e74c3c,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style STATE fill:#3498db,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style TOOLS fill:#9b59b6,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style AUDIT fill:#2ecc71,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style COG fill:#f39c12,color:#fff</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h2 id="syscall-categories" tabindex="-1">Syscall Categories <a class="header-anchor" href="#syscall-categories" aria-label="Permalink to &quot;Syscall Categories&quot;">​</a></h2><h3 id="state-management-1024-1027" tabindex="-1">State Management (1024-1027) <a class="header-anchor" href="#state-management-1024-1027" aria-label="Permalink to &quot;State Management (1024-1027)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Syscall</th><th>Number</th><th>Description</th></tr></thead><tbody><tr><td><code>AK_SYS_READ</code></td><td>1024</td><td>Read heap object</td></tr><tr><td><code>AK_SYS_ALLOC</code></td><td>1025</td><td>Allocate new object</td></tr><tr><td><code>AK_SYS_WRITE</code></td><td>1026</td><td>Patch object (CAS)</td></tr><tr><td><code>AK_SYS_DELETE</code></td><td>1027</td><td>Soft-delete object</td></tr></tbody></table><h3 id="tools-1028-1029" tabindex="-1">Tools (1028-1029) <a class="header-anchor" href="#tools-1028-1029" aria-label="Permalink to &quot;Tools (1028-1029)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Syscall</th><th>Number</th><th>Description</th></tr></thead><tbody><tr><td><code>AK_SYS_CALL</code></td><td>1028</td><td>Execute tool</td></tr><tr><td><code>AK_SYS_BATCH</code></td><td>1029</td><td>Atomic batch operation</td></tr></tbody></table><h3 id="audit-1030-1031" tabindex="-1">Audit (1030-1031) <a class="header-anchor" href="#audit-1030-1031" aria-label="Permalink to &quot;Audit (1030-1031)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Syscall</th><th>Number</th><th>Description</th></tr></thead><tbody><tr><td><code>AK_SYS_COMMIT</code></td><td>1030</td><td>Force log commit</td></tr><tr><td><code>AK_SYS_QUERY</code></td><td>1031</td><td>Query audit log</td></tr></tbody></table><h3 id="control-1032-1036" tabindex="-1">Control (1032-1036) <a class="header-anchor" href="#control-1032-1036" aria-label="Permalink to &quot;Control (1032-1036)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Syscall</th><th>Number</th><th>Description</th></tr></thead><tbody><tr><td><code>AK_SYS_SPAWN</code></td><td>1032</td><td>Create child agent</td></tr><tr><td><code>AK_SYS_SEND</code></td><td>1033</td><td>Send message</td></tr><tr><td><code>AK_SYS_RECV</code></td><td>1034</td><td>Receive message</td></tr><tr><td><code>AK_SYS_ASSERT</code></td><td>1035</td><td>Assert predicate (halt on fail)</td></tr><tr><td><code>AK_SYS_RESPOND</code></td><td>1036</td><td>Send response to external</td></tr></tbody></table><h3 id="cognitive-1037" tabindex="-1">Cognitive (1037) <a class="header-anchor" href="#cognitive-1037" aria-label="Permalink to &quot;Cognitive (1037)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Syscall</th><th>Number</th><th>Description</th></tr></thead><tbody><tr><td><code>AK_SYS_INFERENCE</code></td><td>1037</td><td>LLM gateway</td></tr></tbody></table><h3 id="deny-ux-1040-1042" tabindex="-1">Deny UX (1040-1042) <a class="header-anchor" href="#deny-ux-1040-1042" aria-label="Permalink to &quot;Deny UX (1040-1042)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Syscall</th><th>Number</th><th>Description</th></tr></thead><tbody><tr><td><code>AK_SYS_LAST_ERROR</code></td><td>1040</td><td>Get last denial info</td></tr><tr><td><code>AK_SYS_TRACE_RING_READ</code></td><td>1041</td><td>Read trace ring buffer</td></tr><tr><td><code>AK_SYS_POLICY_SUGGEST</code></td><td>1042</td><td>Dump policy suggestions</td></tr></tbody></table><h2 id="error-codes" tabindex="-1">Error Codes <a class="header-anchor" href="#error-codes" aria-label="Permalink to &quot;Error Codes&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">graph TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Error Code Ranges&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        direction TB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PROTO[-4000 to -4099&lt;br/&gt;Protocol Errors]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CAP[-4100 to -4199&lt;br/&gt;Capability Errors]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        POL[-4200 to -4299&lt;br/&gt;Policy Errors]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RES[-4300 to -4399&lt;br/&gt;Resource Errors]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        EXEC[-4400 to -4499&lt;br/&gt;Execution Errors]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    subgraph &quot;Common Error Flows&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        REQ[Request] --&gt; PARSE{Parse OK?}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PARSE --&gt;|No| PROTO</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        PARSE --&gt;|Yes| CAPV{Cap Valid?}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CAPV --&gt;|No| CAP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        CAPV --&gt;|Yes| POLV{Policy OK?}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        POLV --&gt;|No| POL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        POLV --&gt;|Yes| BUDV{Budget OK?}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        BUDV --&gt;|No| RES</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        BUDV --&gt;|Yes| RUN{Execute OK?}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RUN --&gt;|No| EXEC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        RUN --&gt;|Yes| SUCCESS[Success]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style PROTO fill:#e74c3c,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style CAP fill:#e74c3c,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style POL fill:#e74c3c,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style RES fill:#e74c3c,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style EXEC fill:#e74c3c,color:#fff</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    style SUCCESS fill:#27ae60,color:#fff</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="protocol-errors-4000-to-4099" tabindex="-1">Protocol Errors (-4000 to -4099) <a class="header-anchor" href="#protocol-errors-4000-to-4099" aria-label="Permalink to &quot;Protocol Errors (-4000 to -4099)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Code</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>-4001</td><td><code>E_FRAME_TOO_LARGE</code></td><td>Request exceeds max size</td></tr><tr><td>-4002</td><td><code>E_SCHEMA_INVALID</code></td><td>JSON schema validation failed</td></tr><tr><td>-4003</td><td><code>E_SCHEMA_UNKNOWN</code></td><td>Unknown schema type</td></tr></tbody></table><h3 id="capability-errors-4100-to-4199" tabindex="-1">Capability Errors (-4100 to -4199) <a class="header-anchor" href="#capability-errors-4100-to-4199" aria-label="Permalink to &quot;Capability Errors (-4100 to -4199)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Code</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>-4100</td><td><code>E_CAP_MISSING</code></td><td>No capability provided</td></tr><tr><td>-4101</td><td><code>E_CAP_INVALID</code></td><td>HMAC verification failed</td></tr><tr><td>-4102</td><td><code>E_CAP_EXPIRED</code></td><td>Capability TTL exceeded</td></tr><tr><td>-4103</td><td><code>E_CAP_SCOPE</code></td><td>Capability doesn&#39;t cover request</td></tr><tr><td>-4104</td><td><code>E_CAP_REVOKED</code></td><td>Capability has been revoked</td></tr><tr><td>-4105</td><td><code>E_CAP_RATE</code></td><td>Rate limit exceeded</td></tr></tbody></table><h3 id="policy-errors-4200-to-4299" tabindex="-1">Policy Errors (-4200 to -4299) <a class="header-anchor" href="#policy-errors-4200-to-4299" aria-label="Permalink to &quot;Policy Errors (-4200 to -4299)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Code</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>-4200</td><td><code>E_REPLAY</code></td><td>Duplicate sequence number</td></tr><tr><td>-4201</td><td><code>E_POLICY_DENY</code></td><td>Policy explicitly denies</td></tr><tr><td>-4202</td><td><code>E_APPROVAL_REQUIRED</code></td><td>Human approval needed</td></tr><tr><td>-4203</td><td><code>E_TAINT</code></td><td>Taint level too high</td></tr></tbody></table><h3 id="resource-errors-4300-to-4399" tabindex="-1">Resource Errors (-4300 to -4399) <a class="header-anchor" href="#resource-errors-4300-to-4399" aria-label="Permalink to &quot;Resource Errors (-4300 to -4399)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Code</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>-4300</td><td><code>E_BUDGET_EXCEEDED</code></td><td>Would exceed budget</td></tr><tr><td>-4301</td><td><code>E_RATE_LIMIT</code></td><td>Rate limit exceeded</td></tr><tr><td>-4302</td><td><code>E_DEADLINE</code></td><td>Operation timed out</td></tr></tbody></table><h3 id="execution-errors-4400-to-4499" tabindex="-1">Execution Errors (-4400 to -4499) <a class="header-anchor" href="#execution-errors-4400-to-4499" aria-label="Permalink to &quot;Execution Errors (-4400 to -4499)&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Code</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>-4400</td><td><code>E_CONFLICT</code></td><td>CAS version mismatch</td></tr><tr><td>-4401</td><td><code>E_TOOL_FAIL</code></td><td>Tool execution failed</td></tr><tr><td>-4402</td><td><code>E_DLP_BLOCK</code></td><td>DLP blocked content</td></tr></tbody></table><h2 id="request-response-flow" tabindex="-1">Request/Response Flow <a class="header-anchor" href="#request-response-flow" aria-label="Permalink to &quot;Request/Response Flow&quot;">​</a></h2><div class="language-mermaid vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">mermaid</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sequenceDiagram</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Agent as AI Agent</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant SDK as Authority SDK</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Gate as Authority Gate</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Exec as Executor</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    participant Audit as Audit Log</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Agent-&gt;&gt;SDK: Function call</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK-&gt;&gt;SDK: Build JSON request</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Note over SDK: Request Structure:&lt;br/&gt;pid, run_id, seq,&lt;br/&gt;op, args, cap</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    SDK-&gt;&gt;Gate: Syscall with JSON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Gate-&gt;&gt;Gate: Parse &amp; Validate</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Gate-&gt;&gt;Gate: Verify Capability</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Gate-&gt;&gt;Gate: Check Policy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Gate-&gt;&gt;Gate: Check Budget</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    alt All Checks Pass</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Gate-&gt;&gt;Exec: Execute operation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Exec--&gt;&gt;Gate: Result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Gate-&gt;&gt;Audit: Log success</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Audit--&gt;&gt;Gate: seq, hash</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Gate--&gt;&gt;SDK: Success response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SDK--&gt;&gt;Agent: Parsed result</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    else Check Failed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Gate-&gt;&gt;Audit: Log denial</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Gate--&gt;&gt;SDK: Error response</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        SDK--&gt;&gt;Agent: Error with fix suggestion</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    end</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="request-format" tabindex="-1">Request Format <a class="header-anchor" href="#request-format" aria-label="Permalink to &quot;Request Format&quot;">​</a></h2><p>All AK syscalls use JSON request/response:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;pid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;agent-7a3f&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;run_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-01-15T10:30:00Z&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;seq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;op&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;WRITE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;cap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="response-format" tabindex="-1">Response Format <a class="header-anchor" href="#response-format" aria-label="Permalink to &quot;Response Format&quot;">​</a></h2><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ok&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#B31D28;--shiki-light-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;tokens&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">150</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;latency_ms&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">23</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Or on error:</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ok&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;error&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">-4201</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;E_POLICY_DENY&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;message&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Operation denied by policy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;missing_cap&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;fs.write&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;suggested_fix&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;write = [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/path/to/file</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">]&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h2><ul><li><a href="/api/syscalls">Syscalls Reference</a> - Detailed syscall documentation</li><li><a href="/api/effects">Effects Reference</a> - Effect types and authorization</li></ul>`,40)])])}const k=a(e,[["render",l]]);export{o as __pageData,k as default};
